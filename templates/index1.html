
<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
  href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css"
  rel="stylesheet"
  />

  <!-- Bootstrap core CSS -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet"/>
  <link href="{% static 'css/styles_home.css' %}" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static 'font-awesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <link rel="shortcut icon" type="image/x-icon" href="{% static 'img/stamp.png' %}">
  <title>ICT Ticketing System</title>

  <style>
    /* Full page background with an image */
    body {
      background: linear-gradient(
        rgba(0, 0, 0, 0.6), 
        rgba(0, 0, 0, 0.6)
      ), url("{% static 'img/background.jpg' %}") no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }

/* Enhance the home section with a background image */
#home {
  background-image: url("{% static 'img/background1.jpg' %}");
  background-size: cover;
  background-position: center;
  color: white;
  padding-top: 5px;
  padding: 90px 10;
  text-align: center;
}

</style>
<style>
  .helpdesk-container {
    max-width: 800px;
    margin: 0 auto;
  }

  .welcome-section, .image-section, .steps-section {
    background: rgba(255, 255, 255, 0.85);
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.2);
    color: #333;
    text-align: center;
    margin-bottom: 20px;
  }

  .image-section img {
    opacity: 0.7;
  }

  .steps-section ul {
    text-align: left;
  }

  .steps-section li {
    margin-bottom: 10px;
  }
</style>
</head>
<body>

  <div class="h1 spinner-border text-info" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>

  <!-- Navbar -->
  <header class="d-flex flex-wrap align-items-center justify-content-between py-3 mb-4 border-bottom">
    <div class="container-fluid navbar navbar-expand-lg" > 
      <div class="d-flex flex-wrap align-items-center justify-content-between w-100">
        <!-- Logo aligned to the left -->
        <a class="navbar-brand" href="/">
          <img src="{% static 'img/nmklogo_w.png' %}" width="220" height="60" alt="Home" class="d-inline-block align-text-top logo-glow">
        </a>
        <!-- Toggler button for small screens -->
        <button class="navbar-toggler navbar-dark" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

        <!-- Collapsible navbar content -->
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0 nav-links-container">
           <li class="nav-item">
    <a href="/" class="nav-link nav-hover link-light">
        <i class="fas fa-home"></i> Home
    </a>
</li>
<li class="nav-item">
    <a href="#about" class="nav-link nav-hover link-light">
        <i class="fas fa-info-circle"></i> About
    </a>
</li>
<li class="nav-item">
    <a href="#contact" class="nav-link nav-hover link-light">
        <i class="fas fa-envelope"></i> Contact
    </a>
</li>
{% if user.is_authenticated %}
<li class="nav-item">
    <a class="nav-link nav-hover link-light" href="{% url 'accounts:logout' %}">
        <i class="fas fa-sign-out-alt"></i> Logout
    </a>
</li>
{% else %}
<li class="nav-item">
    <a href="{% url 'accounts:login' %}" class="nav-link nav-hover link-light">
        <i class="fas fa-user"></i> User
    </a>
</li>
<li class="nav-item">
    <a href="/admin/" class="nav-link nav-hover link-light">
        <i class="fas fa-user-shield"></i> Admin
    </a>
</li>
{% endif %}
          </ul>
        </div>

      </div>
    </div>
  </header>

  <!-- home Section -->
  <section id="home" class="py-5 ">
    <div class="container-fluid row">
      <div  style="margin-bottom: 1em;" class=" content-container">
        <h1>
          Welcome to the NMK ICT Help Desk
        </h1>
        <p>This is the home page for the  NMK ICT Help Desk. Please login to create or manage tickets.</p>

      </div>
      


      <div class="col md-4">
        <div class="card h-100 content-container">
          <div class="card-body">
            <h5 class="card-title"><b> <u>Create a Ticket</u></b></h5>
            <p class="card-text">Submit a new ticket for any ICT related issue.</p>
            <a href="{% url 'tickets:ticket_create' %}" class="btn btn-primary"> Create Ticket <i class="fas fa-plus" style="font-size: 24px;"></i></a>
          </div>
        </div>
      </div>
    <div class="col md-4">
    <div class="card h-100 content-container">
        <div class="card-body">
            {% if request.user.is_staff %}
                <!-- Card content for staff -->
                <h5 class="card-title"><b><u>Raised Tickets</u></b></h5>
                <p class="card-text">View all raised tickets and manage ICT requests.</p>
                <a href="{% url 'tickets:ticket_list' %}" class="btn btn-primary">
                    View Tickets <i class="fas fa-tasks" style="font-size: 24px;"></i>
                </a>
            {% else %}
                <!-- Card content for regular users -->
                <h5 class="card-title"><b><u>My Ticket History</u></b></h5>
                <p class="card-text">View your ticket history and check the status of your requests.</p>
                <a href="{% url 'tickets:ticket_list' %}" class="btn btn-primary">
                    View My Tickets <i class="fas fa-history" style="font-size: 24px;"></i>
                </a>
            {% endif %}
        </div>
    </div>
</div>
      <div class="col md-4">
        <div class="card h-100 content-container">
          <div class="card-body">
            <h5 class="card-title"><b> <u>Prevetive Maintenance</u></b></h5>
            <p class="card-text">Request Preventive Maintenance using the ticketing system.</p><a href="{% url 'tickets:maintenance_history' %}" class="btn btn-primary">Request Support <i class="fas fa-file-signature" style="font-size: 24px;"></i> </a>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- about Section -->
  <section id="about" class="py-5">
    <div class="container-fluid">
 <div class="helpdesk-container">

  <!-- Welcome Section -->
  <div class="welcome-section">
    <h2>Welcome to NMK's ICT Help Desk</h2>
    <p class="lead">
      The NMK ICT Help Desk is your one-stop solution for managing and resolving ICT-related issues within our organization. 
      Designed to be user-friendly, this system bridges the communication gap between you and the ICT team, ensuring that 
      your problems are addressed swiftly and effectively.
    </p> 
  </div>

  <!-- Image Section -->
  <div class="image-section">
 <div class="chart-section">
    <h3>Ticket Statistics</h3>

    <div class="chart-container">
        <h5>Closed Tickets by Category</h5>
        <canvas id="closedTicketsByCategoryChart"></canvas>
    </div>
    <div class="chart-container">
        <h5>Closed Tickets with Follow-Up by Category</h5>
        <canvas id="closedFollowupByCategoryChart"></canvas>
    </div>
    <div class="chart-container">
        <h5>Total Tickets Raised</h5>
        <canvas id="totalTicketsChart"></canvas>
    </div>
    <div class="chart-container">
        <h5>Open Tickets</h5>
        <canvas id="openTicketsChart"></canvas>
    </div>
</div>



</div>
</div>
  </div>

  <!-- Steps Section -->
  <div class="steps-section">
    <h3>Your Path to Quick Solutions</h3>
    <ul>
      <li><strong>Step 1: Register or Login</strong> – Getting started is easy! Just log in or register to unlock our ticketing service.</li>
      <li><strong>Step 2: Raise a Ticket</strong> – Found a tech issue? Create a new ticket by sharing the details, and let us know how we can help.</li>
      <li><strong>Step 3: Technician to the Rescue</strong> – Our expert ICT team will jump on your request, reaching out to provide fast and reliable assistance.</li>
      <li><strong>Step 4: Sign, Seal, Done!</strong> – Once your issue is resolved, both you and the technician will sign off, officially closing the ticket with a job well done!</li>
    </ul>
  </div>

</div>


     
      
    </div>
  </section>

  

  <!-- Contact Section -->
  <section id="contact" class="py-5">
    <div class="container content-container">
      <h2 class="text-center">Contact Us</h2>
      <p class="lead text-center">Have questions or need support? Reach out to us!</p>
      <div class="container-fluid success">
       <div class="col-md-8 mx-auto">
        <form action="{% url 'feedback_create_url' %}" method="POST">
          {% csrf_token %}
          {% if form.errors %}
          <div style="color: red;">
            <strong>Please correct the errors below:</strong>
            <ul>
              {% for field in form %}
              {% if field.errors %}
              <li>{{ field.label }}: {{ field.errors|striptags }}</li>
              {% endif %}
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          <div class="mb-3">
            <label for="f_name" class="form-label">Name</label>
            <input type="text" class="form-control" id="f_name" name="f_name" required>
          </div>
          <div class="mb-3">
            <label for="f_email" class="form-label">Email address</label>
            <input type="email" class="form-control" id="f_email" name="f_email" required>
          </div>
          <div class="mb-3">
            <label for="f_message" class="form-label">Message</label>
            <textarea class="form-control" id="f_message" name="f_message" rows="4" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
          {% if messages %}
          {% for message in messages %}
          <div style="color: green;">
            {{ message }}
          </div>
          {% endfor %}
          {% endif %}
        </form>
      </div>
    </div>
  </div>
</section>

<footer class="text-center py-3 bg-dark text-light">
  <p class="mb-0">&copy; 2024 ICT Ticketing System NMK. All Rights Reserved.</p>
</footer>

<script src="https://unpkg.com/scrollreveal"></script>
<script>
    // Loading spinner removal
  window.onload = function() {
    document.querySelector('.spinner-border').remove();
  }
</script>
<!-- Optional JavaScript to add a scroll effect to change navbar background -->
<script>
  $(document).ready(function () {
    $('.navbar-toggler').on('click', function () {
    $('#navbarNav').slideToggle(); // Slide up/down animation
  });
  });
</script>
<script src="{% static 'js/charts.js' %}"></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'js/main_home.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
   document.addEventListener('DOMContentLoaded', function () {
    // Closed Tickets by Category
    const closedTicketsByCategoryLabels = [];
    const closedTicketsByCategoryData = [];
    {% for item in closed_tickets_by_category %}
        closedTicketsByCategoryLabels.push("{{ item.category }}");
        closedTicketsByCategoryData.push({{ item.total }});
    {% endfor %}

    // Closed Follow-up by Category
    const closedFollowupByCategoryLabels = [];
    const closedFollowupByCategoryData = [];
    {% for item in closed_followup_by_category %}
        closedFollowupByCategoryLabels.push("{{ item.category }}");
        closedFollowupByCategoryData.push({{ item.total }});
    {% endfor %}

    // Total Tickets Raised
    const totalTicketsData = [{{ total_tickets }}];

    // Open Tickets
    const openTicketsData = [{{ open_tickets }}];

    // Initialize charts
    new Chart(document.getElementById('closedTicketsByCategoryChart').getContext('2d'), {
        type: 'pie',
        data: {
            labels: closedTicketsByCategoryLabels,
            datasets: [{
                label: 'Closed Tickets',
                data: closedTicketsByCategoryData,
                backgroundColor: 'rgba(54, 162, 235, 0.7)',
                borderWidth: 1
            }]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
    });

    new Chart(document.getElementById('closedFollowupByCategoryChart').getContext('2d'), {
        type: 'pie',
        data: {
            labels: closedFollowupByCategoryLabels,
            datasets: [{
                label: 'Closed with Follow-Up',
                data: closedFollowupByCategoryData,
                backgroundColor: 'rgba(255, 99, 132, 0.7)',
                borderWidth: 1
            }]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
    });

    new Chart(document.getElementById('totalTicketsChart').getContext('2d'), {
        type: 'pie',
        data: {
            labels: ['Total Tickets Raised'],
            datasets: [{
                label: 'Total Tickets',
                data: totalTicketsData,
                backgroundColor: 'rgba(75, 192, 192, 0.7)',
                borderWidth: 1
            }]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
    });

    new Chart(document.getElementById('openTicketsChart').getContext('2d'), {
        type: 'pie',
        data: {
            labels: ['Open Tickets'],
            datasets: [{
                label: 'Open Tickets',
                data: openTicketsData,
                backgroundColor: 'rgba(255, 206, 86, 0.7)',
                borderWidth: 1
            }]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
    });
});
</script>
</body>
</html>

